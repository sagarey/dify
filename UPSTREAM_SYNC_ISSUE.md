# Issue: 同步上游 langgenius/dify 主分支最新更新

## 📋 需求描述

将本 fork 仓库与上游 `langgenius/dify` 主分支进行全面同步，获取所有最新功能、Bug修复和改进。

## 🎯 同步目标

### 主要更新内容
- 📝 **注解面板功能增强** (#22968) - 提供更好的注解管理和面板交互
- 🔌 **Elasticsearch Cloud Connector 支持** (#23017) - 支持 Elasticsearch 云连接器
- 🌐 **i18n 国际化改进** - 清理未使用的键，修复嵌套和占位符问题
- 🔧 **工作流程文件上传功能** - 支持 Google NotebookLM Podcast 风格的功能
- 🤖 **MCP (Model Context Protocol) 完整支持** - 新增 MCP 客户端和服务器支持
- ⚙️ **配置管理系统重构** - 全新的 configs 目录结构和管理系统
- 📚 **多语言文档扩展** - 新增德语、西班牙语、法语、土耳其语、越南语等版本

### Bug 修复
- 🐛 插件自动更新显示问题修复
- 🔧 API 验证逻辑优化和错误处理改进  
- 💾 数据库会话清理问题修复
- ⏱️ HTTP 节点超时验证修复
- 🔍 元数据 API 空值验证一致性问题修复

## 📊 同步统计

- **提交数量**: 4300+ 个新提交
- **新增文件**: 数百个新配置文件和组件
- **更新分支**: 150+ 个上游分支已同步
- **版本标签**: 包含所有版本标签 (v0.2.1 至 v1.7.1)

## ⚠️ 技术限制

### GitHub App 权限限制
由于当前 GitHub App 缺少以下权限，无法直接推送包含特定文件的更改：
- `workflows` - 无法修改 `.github/workflows/` 目录下的 GitHub Actions 工作流文件
- 临时解决方案：排除 workflows 文件的同步，后续手工处理

## ✅ 验收标准

- [ ] 本地代码完全同步到上游最新版本
- [ ] 所有新功能可正常使用
- [ ] 现有功能兼容性测试通过
- [ ] 文档更新完整
- [ ] 成功推送到远程仓库

## 🔄 实施步骤

1. ✅ 添加上游远程源 `langgenius/dify`
2. ✅ 获取上游所有更新和分支
3. ✅ 分析本地与上游的差异
4. ✅ 解决合并冲突（README_TW.md, milvus_vector.py）
5. ✅ 临时排除 workflows 文件以解决权限问题
6. 🔄 推送完整同步分支
7. ⏳ 创建 PR 合并到主分支
8. ⏳ 后续处理 workflows 文件同步

## 🚀 预期收益

- **功能增强**: 获得最新的注解、工作流程、MCP 等功能
- **性能优化**: 包含多项性能改进和Bug修复
- **国际化支持**: 更完善的多语言支持
- **开发体验**: 更好的配置管理和开发工具
- **社区同步**: 与上游社区保持同步，便于后续贡献

## 🔗 相关链接

- 上游仓库: https://github.com/langgenius/dify
- 本次同步分支: `sync/upstream-main-no-workflows`
- 主要更新提交: 4499cda18..upstream/main

---

**优先级**: 高  
**类型**: 功能增强 + Bug修复  
**预估工作量**: 2-3 小时（主要为同步和测试时间）